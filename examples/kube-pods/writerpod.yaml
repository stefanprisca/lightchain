# // Copyright 2020 Stefan Prisca
# //
# // Licensed under the Apache License, Version 2.0 (the "License");
# // you may not use this file except in compliance with the License.
# // You may obtain a copy of the License at
# //
# //     http://www.apache.org/licenses/LICENSE-2.0
# //
# // Unless required by applicable law or agreed to in writing, software
# // distributed under the License is distributed on an "AS IS" BASIS,
# // WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# // See the License for the specific language governing permissions and
# // limitations under the License.

apiVersion: v1
kind: Pod
metadata:
  name: lightpod
  labels:
    klight.networkId : k8sPodNetwork
spec:
  volumes:
  - name: tempsto
    emptyDir: {}
  containers:
  # - name: lightpeer
  #   image: localhost:32000/lightpeer:example
  #   imagePullPolicy: Always
  #   command: ["./lightpeer"]
  #   args: ["-statePath=$(STATE_PATH)", "-host=0.0.0.0"]
  #   resources:
  #     limits:
  #       cpu: 100m
  #       memory: 100Mi
  #     requests:
  #       cpu: 50m
  #       memory: 50Mi
  #   env:
  #     - name: LP_BLOCKREPO
  #       value: "/blockRepository"
  #     - name: STATE_PATH
  #       value: "/usr/share/tempSto" 
  #   ports:
  #   - containerPort: 9081 # gRPC port.
  #   volumeMounts:
  #   - name: tempSto
  #     mountPath: /usr/share/tempSto
  - name: writer
    image: debian
    volumeMounts:
    - name: tempsto
      mountPath: /tempsto
    command: ["/bin/sh", "-c"]
    args:
      - while true; do
          date >> /tempsto/index.html;
          sleep 1;
        done