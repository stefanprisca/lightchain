syntax="proto3";

option go_package = "api/lightpeer";

message Lightblock {
    string ID  = 1;
    bytes Payload = 2;
}

service Lightpeer {
    rpc Connect (ConnectRequest) returns (ConnectResponse) {};
    rpc Persist (PersistRequest) returns (PersistResponse) {};
    rpc Query   (EmptyQueryRequest) returns (stream Lightblock) {};
    rpc NotifyNewBlock (NewBlockRequest) returns (NewBlockResponse) {};
}

message ConnectRequest {
    string IP  = 1;
}

message ConnectResponse {
    string Response = 1;
}

message PersistRequest {
    string Payload = 1;
    // otel.SpanContext teleContext
}

message PersistResponse {
    string Response = 1;
}

message EmptyQueryRequest {}

message NewBlockRequest {
    string Contents = 1;
    string UID = 2;
}

message NewBlockResponse {
    string Response = 1;
}
